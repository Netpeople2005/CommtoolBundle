{% extends "::base.html.twig" %}

{% set controls = template.controls %}

{% block body %}
<div ng-app ng-controller="MainCtrl">
{{ template.content|raw }}
<hr/>
{{ commtool_controls(template) }}
</div>
{% endblock %}

{% block javascripts %}
<script type="text/javascript" src="{{ asset('bundles/optimecommtool/js/jquery.min.js') }}"></script>
<script type="text/javascript" src="{{ asset('bundles/optimecommtool/js/angular.min.js') }}"></script>

<script type="text/javascript">
    function MainCtrl($scope){
                
        {% for i, controls in template.values %}
            $scope.{{ i }} = {{ controls|json_encode()|raw }};
        {% endfor %}
        
        $scope.add = function(){
            $scope.loop_sin.push({
                singleline:['Que bien, agreg√© un elemento :-)']
            })
            
            console.log($scope.loop_sin)
        }
        
        $scope.aaa = "{{ asset("bundles/commtooltemplate/images/img_01a.jpg") }}"
    }
</script>
{% endblock %}